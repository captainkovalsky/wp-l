"use strict";(self.webpackChunk_surecart_blocks_next=self.webpackChunk_surecart_blocks_next||[]).push([[5676],{1847:function(e,t,n){function i(e){let t="";const n=Object.entries(e);let i;for(;i=n.shift();){let[e,r]=i;if(Array.isArray(r)||r&&r.constructor===Object){const t=Object.entries(r).reverse();for(const[i,r]of t)n.unshift([`${e}[${i}]`,r])}else void 0!==r&&(null===r&&(r=""),t+="&"+[e,r].map(encodeURIComponent).join("="))}return t.substr(1)}function r(e){try{return decodeURIComponent(e)}catch(t){return e}}function s(e){return(function(e){let t;try{t=new URL(e,"http://example.com").search.substring(1)}catch(e){}if(t)return t}(e)||"").replace(/\+/g,"%20").split("&").reduce(((e,t)=>{const[n,i=""]=t.split("=").filter(Boolean).map(r);return n&&function(e,t,n){const i=t.length,r=i-1;for(let s=0;s<i;s++){let i=t[s];!i&&Array.isArray(e)&&(i=e.length.toString()),i=["__proto__","constructor","prototype"].includes(i)?i.toUpperCase():i;const o=!isNaN(Number(t[s+1]));e[i]=s===r?n:e[i]||(o?[]:{}),Array.isArray(e[i])&&!o&&(e[i]={...e[i]}),e=e[i]}}(e,n.replace(/\]/g,"").split("["),i),e}),Object.create(null))}function o(e="",t){if(!t||!Object.keys(t).length)return e;let n=e;const r=e.indexOf("?");return-1!==r&&(t=Object.assign(s(e),t),n=n.substr(0,r)),n+"?"+i(t)}n.d(t,{a:function(){return o},b:function(){return i},g:function(){return s}})},2195:function(e,t,n){n.d(t,{c:function(){return c},g:function(){return d},i:function(){return u}});var i,r=n(1847);const s=["AU","BR","CA","CH","ES","HK","IE","IN","IT","JP","MY","MX","US"],o=["HK"],a=["SG"],l=(null===(i=window.scData)||void 0===i?void 0:i.locale)||navigator.language||(null===navigator||void 0===navigator?void 0:navigator.browserLanguage)||(navigator.languages||["en"])[0],c=async()=>{const e=(0,r.a)("https://api.surecart.com/v1/public/atlas",{locale:l}),t=await fetch(e),n=await t.json();return null==n?void 0:n.data.map((({code:e,name:t})=>({value:e,label:t})))},d=async e=>{const t=(0,r.a)(`https://api.surecart.com/v1/public/atlas/${e}`,{locale:l}),n=await fetch(t);return await n.json()},u=e=>{return(null==e?void 0:e.country)&&(null==e?void 0:e.line_1)&&(t=e.country,!!o.includes(t)||(null==e?void 0:e.postal_code))&&(!(e=>!a.includes(e))(e.country)||(null==e?void 0:e.city))&&(!(e=>s.includes(e))(e.country)||(null==e?void 0:e.state));var t}},9955:function(e,t,n){n.d(t,{_:function(){return __},a:function(){return _n},b:function(){return _x},s:function(){return a}});var i,r=n(4777),s={};i=s,function(){var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function t(n){return function(n,i){var r,s,o,a,l,c,d,u,h,p=1,b=n.length,m="";for(s=0;s<b;s++)if("string"==typeof n[s])m+=n[s];else if("object"==typeof n[s]){if((a=n[s]).keys)for(r=i[p],o=0;o<a.keys.length;o++){if(null==r)throw new Error(t('[sprintf] Cannot access property "%s" of undefined value "%s"',a.keys[o],a.keys[o-1]));r=r[a.keys[o]]}else r=a.param_no?i[a.param_no]:i[p++];if(e.not_type.test(a.type)&&e.not_primitive.test(a.type)&&r instanceof Function&&(r=r()),e.numeric_arg.test(a.type)&&"number"!=typeof r&&isNaN(r))throw new TypeError(t("[sprintf] expecting number but found %T",r));switch(e.number.test(a.type)&&(u=r>=0),a.type){case"b":r=parseInt(r,10).toString(2);break;case"c":r=String.fromCharCode(parseInt(r,10));break;case"d":case"i":r=parseInt(r,10);break;case"j":r=JSON.stringify(r,null,a.width?parseInt(a.width):0);break;case"e":r=a.precision?parseFloat(r).toExponential(a.precision):parseFloat(r).toExponential();break;case"f":r=a.precision?parseFloat(r).toFixed(a.precision):parseFloat(r);break;case"g":r=a.precision?String(Number(r.toPrecision(a.precision))):parseFloat(r);break;case"o":r=(parseInt(r,10)>>>0).toString(8);break;case"s":r=String(r),r=a.precision?r.substring(0,a.precision):r;break;case"t":r=String(!!r),r=a.precision?r.substring(0,a.precision):r;break;case"T":r=Object.prototype.toString.call(r).slice(8,-1).toLowerCase(),r=a.precision?r.substring(0,a.precision):r;break;case"u":r=parseInt(r,10)>>>0;break;case"v":r=r.valueOf(),r=a.precision?r.substring(0,a.precision):r;break;case"x":r=(parseInt(r,10)>>>0).toString(16);break;case"X":r=(parseInt(r,10)>>>0).toString(16).toUpperCase()}e.json.test(a.type)?m+=r:(!e.number.test(a.type)||u&&!a.sign?h="":(h=u?"+":"-",r=r.toString().replace(e.sign,"")),c=a.pad_char?"0"===a.pad_char?"0":a.pad_char.charAt(1):" ",d=a.width-(h+r).length,l=a.width&&d>0?c.repeat(d):"",m+=a.align?h+r+l:"0"===c?h+l+r:l+h+r)}return m}(function(t){if(r[t])return r[t];for(var n,i=t,s=[],o=0;i;){if(null!==(n=e.text.exec(i)))s.push(n[0]);else if(null!==(n=e.modulo.exec(i)))s.push("%");else{if(null===(n=e.placeholder.exec(i)))throw new SyntaxError("[sprintf] unexpected placeholder");if(n[2]){o|=1;var a=[],l=n[2],c=[];if(null===(c=e.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a.push(c[1]);""!==(l=l.substring(c[0].length));)if(null!==(c=e.key_access.exec(l)))a.push(c[1]);else{if(null===(c=e.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");a.push(c[1])}n[2]=a}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");s.push({placeholder:n[0],param_no:n[1],keys:n[2],sign:n[3],pad_char:n[4],align:n[5],width:n[6],precision:n[7],type:n[8]})}i=i.substring(n[0].length)}return r[t]=s}(n),arguments)}function n(e,n){return t.apply(null,[e].concat(n||[]))}var r=Object.create(null);i.sprintf=t,i.vsprintf=n,"undefined"!=typeof window&&(window.sprintf=t,window.vsprintf=n)}();const o=function(e,t){var n,i,r=0;function s(){var s,o,a=n,l=arguments.length;e:for(;a;){if(a.args.length===arguments.length){for(o=0;o<l;o++)if(a.args[o]!==arguments[o]){a=a.next;continue e}return a!==n&&(a===i&&(i=a.prev),a.prev.next=a.next,a.next&&(a.next.prev=a.prev),a.next=n,a.prev=null,n.prev=a,n=a),a.val}a=a.next}for(s=new Array(l),o=0;o<l;o++)s[o]=arguments[o];return a={args:s,val:e.apply(null,s)},n?(n.prev=a,a.next=n):i=a,r===t.maxSize?(i=i.prev).next=null:r++,n=a,a.val}return t=t||{},s.clear=function(){n=null,i=null,r=0},s}(console.error);function a(e,...t){try{return s.sprintf(e,...t)}catch(t){return t instanceof Error&&o("sprintf error: \n\n"+t.toString()),e}}var l,c,d,u;l={"(":9,"!":8,"*":7,"/":7,"%":7,"+":6,"-":6,"<":5,"<=":5,">":5,">=":5,"==":4,"!=":4,"&&":3,"||":2,"?":1,"?:":1},c=["(","?"],d={")":["("],":":["?","?:"]},u=/<=|>=|==|!=|&&|\|\||\?:|\(|!|\*|\/|%|\+|-|<|>|\?|\)|:/;var h={"!":function(e){return!e},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"==":function(e,t){return e===t},"!=":function(e,t){return e!==t},"&&":function(e,t){return e&&t},"||":function(e,t){return e||t},"?:":function(e,t,n){if(e)throw t;return n}};var p={contextDelimiter:"",onMissingKey:null};function b(e,t){var n;for(n in this.data=e,this.pluralForms={},this.options={},p)this.options[n]=void 0!==t&&n in t?t[n]:p[n]}b.prototype.getPluralForm=function(e,t){var n,i,r,s,o=this.pluralForms[e];return o||("function"!=typeof(r=(n=this.data[e][""])["Plural-Forms"]||n["plural-forms"]||n.plural_forms)&&(i=function(e){var t,n,i;for(t=e.split(";"),n=0;n<t.length;n++)if(0===(i=t[n].trim()).indexOf("plural="))return i.substr(7)}(n["Plural-Forms"]||n["plural-forms"]||n.plural_forms),s=function(e){var t=function(e){for(var t,n,i,r,s=[],o=[];t=e.match(u);){for(n=t[0],(i=e.substr(0,t.index).trim())&&s.push(i);r=o.pop();){if(d[n]){if(d[n][0]===r){n=d[n][1]||n;break}}else if(c.indexOf(r)>=0||l[r]<l[n]){o.push(r);break}s.push(r)}d[n]||o.push(n),e=e.substr(t.index+n.length)}return(e=e.trim())&&s.push(e),s.concat(o.reverse())}(e);return function(e){return function(e,t){var n,i,r,s,o,a,l=[];for(n=0;n<e.length;n++){if(o=e[n],s=h[o]){for(i=s.length,r=Array(i);i--;)r[i]=l.pop();try{a=s.apply(null,r)}catch(e){return e}}else a=t.hasOwnProperty(o)?t[o]:+o;l.push(a)}return l[0]}(t,e)}}(i),r=function(e){return+s({n:e})}),o=this.pluralForms[e]=r),o(t)},b.prototype.dcnpgettext=function(e,t,n,i,r){var s,o,a;return s=void 0===r?0:this.getPluralForm(e,r),o=n,t&&(o=t+this.options.contextDelimiter+n),(a=this.data[e][o])&&a[s]?a[s]:(this.options.onMissingKey&&this.options.onMissingKey(n,e),0===s?n:i)};const m={plural_forms(e){return 1===e?0:1}},v=/^i18n\.(n?gettext|has_translation)(_|$)/,f=((e,t,n)=>{const i=new b({}),r=new Set,s=()=>{r.forEach((e=>e()))},o=(e,t="default")=>{i.data[t]={...i.data[t],...e},i.data[t][""]={...m,...i.data[t]?.[""]},delete i.pluralForms[t]},a=(e,t)=>{o(e,t),s()},l=(e="default",t,n,r,s)=>(i.data[e]||o(void 0,e),i.dcnpgettext(e,t,n,r,s)),c=(e="default")=>e,_x=(e,t,i)=>{let r=l(i,t,e);return n?(r=n.applyFilters("i18n.gettext_with_context",r,e,t,i),n.applyFilters("i18n.gettext_with_context_"+c(i),r,e,t,i)):r};if(n){const e=e=>{v.test(e)&&s()};n.addAction("hookAdded","core/i18n",e),n.addAction("hookRemoved","core/i18n",e)}return{getLocaleData:(e="default")=>i.data[e],setLocaleData:a,addLocaleData:(e,t="default")=>{i.data[t]={...i.data[t],...e,"":{...m,...i.data[t]?.[""],...e?.[""]}},delete i.pluralForms[t],s()},resetLocaleData:(e,t)=>{i.data={},i.pluralForms={},a(e,t)},subscribe:e=>(r.add(e),()=>r.delete(e)),__:(e,t)=>{let i=l(t,void 0,e);return n?(i=n.applyFilters("i18n.gettext",i,e,t),n.applyFilters("i18n.gettext_"+c(t),i,e,t)):i},_x:_x,_n:(e,t,i,r)=>{let s=l(r,void 0,e,t,i);return n?(s=n.applyFilters("i18n.ngettext",s,e,t,i,r),n.applyFilters("i18n.ngettext_"+c(r),s,e,t,i,r)):s},_nx:(e,t,i,r,s)=>{let o=l(s,r,e,t,i);return n?(o=n.applyFilters("i18n.ngettext_with_context",o,e,t,i,r,s),n.applyFilters("i18n.ngettext_with_context_"+c(s),o,e,t,i,r,s)):o},isRTL:()=>"rtl"===_x("ltr","text direction"),hasTranslation:(e,t,r)=>{const s=t?t+""+e:e;let o=!!i.data?.[null!=r?r:"default"]?.[s];return n&&(o=n.applyFilters("i18n.has_translation",o,e,t,r),o=n.applyFilters("i18n.has_translation_"+c(r),o,e,t,r)),o}}})(0,0,r.d);f.getLocaleData.bind(f),f.setLocaleData.bind(f),f.resetLocaleData.bind(f),f.subscribe.bind(f);const __=f.__.bind(f),_x=f._x.bind(f),_n=f._n.bind(f);f._nx.bind(f),f.isRTL.bind(f),f.hasTranslation.bind(f)},8572:function(e,t,n){n.d(t,{F:function(){return i},p:function(){return r},r:function(){return s}});class i{constructor(e,t){this.form=null,this.input=e,this.options={form:e=>{var t,n;return(null===(n=null===(t=this.closestElement("sc-form",e))||void 0===t?void 0:t.shadowRoot)||void 0===n?void 0:n.querySelector("form"))||this.closestElement("form",e)},name:e=>e.name,value:e=>e.value,disabled:e=>e.disabled,...t},this.form=this.options.form(this.input),this.handleFormData=this.handleFormData.bind(this)}closestElement(e,t){return t?t&&t!=document&&t!=window&&t.closest(e)||this.closestElement(e,t.getRootNode().host):null}addFormData(){this.form&&this.form.addEventListener("formdata",this.handleFormData)}removeFormData(){this.form&&this.form.removeEventListener("formdata",this.handleFormData)}handleFormData(e){const t=this.options.name(this.input),n=this.options.value(this.input);"string"==typeof t&&void 0!==n&&(Array.isArray(n)?n.forEach((n=>{n&&e.formData.append(t,n.toString())})):n&&e.formData.append(t,n.toString()))}}const r=e=>{var t;const{email:n,name:i,first_name:r,last_name:s,phone:o,password:a,shipping_city:l,shipping_country:c,shipping_line_1:d,shipping_line_2:u,shipping_postal_code:h,shipping_state:p,billing_city:b,billing_country:m,billing_line_1:v,billing_line_2:f,billing_postal_code:_,billing_state:g,"tax_identifier.number_type":y,"tax_identifier.number":x,...k}=e,w={...l?{city:l}:{},...c?{country:c}:{},...d?{line_1:d}:{},...u?{line_2:u}:{},...h?{postal_code:h}:{},...p?{state:p}:{}},A={...b?{city:b}:{},...m?{country:m}:{},...v?{line_1:v}:{},...f?{line_2:f}:{},..._?{postal_code:_}:{},...g?{state:g}:{}};return{...i?{name:i}:{},...n?{email:n}:{},...r?{first_name:r}:{},...s?{last_name:s}:{},...o?{phone:o}:{},...a?{password:a}:{},...Object.keys(w||{}).length?{shipping_address:w}:{},...Object.keys(A||{}).length?{billing_address:A}:{},...y&&x?{tax_identifier:{number:x,number_type:y}}:{},...(null===(t=Object.keys(k))||void 0===t?void 0:t.length)?{metadata:k}:{}}},s=async e=>{const t=[...e.shadowRoot.querySelectorAll("*")].filter((e=>"function"==typeof e.reportValidity));for(const e of t)if(!await e.reportValidity())return!1;return!0}},658:function(e,t,n){n.d(t,{s:function(){return a}});var i=n(9955);function r(e="polite"){const t=document.createElement("div");t.id=`a11y-speak-${e}`,t.className="a11y-speak-region",t.setAttribute("style","position: absolute;margin: -1px;padding: 0;height: 1px;width: 1px;overflow: hidden;clip: rect(1px, 1px, 1px, 1px);-webkit-clip-path: inset(50%);clip-path: inset(50%);border: 0;word-wrap: normal !important;"),t.setAttribute("aria-live",e),t.setAttribute("aria-relevant","additions text"),t.setAttribute("aria-atomic","true");const{body:n}=document;return n&&n.appendChild(t),t}let s="";var o;function a(e,t){!function(){const e=document.getElementsByClassName("a11y-speak-region"),t=document.getElementById("a11y-speak-intro-text");for(let t=0;t<e.length;t++)e[t].textContent="";t&&t.setAttribute("hidden","hidden")}(),e=function(e){return e=e.replace(/<[^<>]+>/g," "),s===e&&(e+="Â "),s=e,e}(e);const n=document.getElementById("a11y-speak-intro-text"),i=document.getElementById("a11y-speak-assertive"),r=document.getElementById("a11y-speak-polite");i&&"assertive"===t?i.textContent=e:r&&(r.textContent=e),n&&n.removeAttribute("hidden")}o=function(){const e=document.getElementById("a11y-speak-intro-text"),t=document.getElementById("a11y-speak-assertive"),n=document.getElementById("a11y-speak-polite");null===e&&function(){const e=document.createElement("p");e.id="a11y-speak-intro-text",e.className="a11y-speak-intro-text",e.textContent=(0,i._)("Notifications"),e.setAttribute("style","position: absolute;margin: -1px;padding: 0;height: 1px;width: 1px;overflow: hidden;clip: rect(1px, 1px, 1px, 1px);-webkit-clip-path: inset(50%);clip-path: inset(50%);border: 0;word-wrap: normal !important;"),e.setAttribute("hidden","hidden");const{body:t}=document;t&&t.appendChild(e)}(),null===t&&r("assertive"),null===n&&r("polite")},"undefined"!=typeof document&&("complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",o):o())},4777:function(e,t,n){function i(e){return"string"!=typeof e||""===e?(console.error("The namespace must be a non-empty string."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)||(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)}function r(e){return"string"!=typeof e||""===e?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)||(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)}function s(e,t){return function(n,s,o,a=10){const l=e[t];if(!r(n))return;if(!i(s))return;if("function"!=typeof o)return void console.error("The hook callback must be a function.");if("number"!=typeof a)return void console.error("If specified, the hook priority must be a number.");const c={callback:o,priority:a,namespace:s};if(l[n]){const e=l[n].handlers;let t;for(t=e.length;t>0&&!(a>=e[t-1].priority);t--);t===e.length?e[t]=c:e.splice(t,0,c),l.__current.forEach((e=>{e.name===n&&e.currentIndex>=t&&e.currentIndex++}))}else l[n]={handlers:[c],runs:0};"hookAdded"!==n&&e.doAction("hookAdded",n,s,o,a)}}function o(e,t,n=!1){return function(s,o){const a=e[t];if(!r(s))return;if(!n&&!i(o))return;if(!a[s])return 0;let l=0;if(n)l=a[s].handlers.length,a[s]={runs:a[s].runs,handlers:[]};else{const e=a[s].handlers;for(let t=e.length-1;t>=0;t--)e[t].namespace===o&&(e.splice(t,1),l++,a.__current.forEach((e=>{e.name===s&&e.currentIndex>=t&&e.currentIndex--})))}return"hookRemoved"!==s&&e.doAction("hookRemoved",s,o),l}}function a(e,t){return function(n,i){const r=e[t];return void 0!==i?n in r&&r[n].handlers.some((e=>e.namespace===i)):n in r}}function l(e,t,n=!1){return function(i,...r){const s=e[t];s[i]||(s[i]={handlers:[],runs:0}),s[i].runs++;const o=s[i].handlers;if(!o||!o.length)return n?r[0]:void 0;const a={name:i,currentIndex:0};for(s.__current.push(a);a.currentIndex<o.length;){const e=o[a.currentIndex].callback.apply(null,r);n&&(r[0]=e),a.currentIndex++}return s.__current.pop(),n?r[0]:void 0}}function c(e,t){return function(){var n;const i=e[t];return null!==(n=i.__current[i.__current.length-1]?.name)&&void 0!==n?n:null}}function d(e,t){return function(n){const i=e[t];return void 0===n?void 0!==i.__current[0]:!!i.__current[0]&&n===i.__current[0].name}}function u(e,t){return function(n){const i=e[t];if(r(n))return i[n]&&i[n].runs?i[n].runs:0}}n.d(t,{a:function(){return k},d:function(){return h}});const h=new class{constructor(){this.actions=Object.create(null),this.actions.__current=[],this.filters=Object.create(null),this.filters.__current=[],this.addAction=s(this,"actions"),this.addFilter=s(this,"filters"),this.removeAction=o(this,"actions"),this.removeFilter=o(this,"filters"),this.hasAction=a(this,"actions"),this.hasFilter=a(this,"filters"),this.removeAllActions=o(this,"actions",!0),this.removeAllFilters=o(this,"filters",!0),this.doAction=l(this,"actions"),this.applyFilters=l(this,"filters",!0),this.currentAction=c(this,"actions"),this.currentFilter=c(this,"filters"),this.doingAction=d(this,"actions"),this.doingFilter=d(this,"filters"),this.didAction=u(this,"actions"),this.didFilter=u(this,"filters")}},{addAction:p,addFilter:b,removeAction:m,removeFilter:v,hasAction:f,hasFilter:_,removeAllActions:g,removeAllFilters:y,doAction:x,applyFilters:k,currentAction:w,currentFilter:A,doingAction:C,doingFilter:F,didAction:I,didFilter:S,actions:L,filters:T}=h},8603:function(e,t,n){function i(){return"rtl"===document.dir}n.d(t,{i:function(){return i}})},5676:function(e,t,n){n.r(t),n.d(t,{sc_address:function(){return u},sc_checkbox:function(){return p},sc_tax_id_input:function(){return b}});var i=n(6892),r=n(9955),s=n(2195),o=n(8572),a=n(8603),l=n(658),c=n(8290);n(4777);const d=[{name:"country",priority:30,label:(0,r._)("Country","surecart")},{name:"name",priority:40,label:(0,r._)("Name or Company Name","surecart")},{name:"line_1",priority:50,label:(0,r._)("Address","surecart")},{name:"line_2",priority:60,label:(0,r._)("Line 2","surecart")},{name:"city",priority:70,label:(0,r._)("City","surecart")},{name:"state",priority:80,label:(0,r._)("State / County","surecart")},{name:"postal_code",priority:90,label:(0,r._)("Postal Code","surecart")}],u=class{constructor(e){(0,i.r)(this,e),this.scChangeAddress=(0,i.c)(this,"scChangeAddress",7),this.scInputAddress=(0,i.c)(this,"scInputAddress",7),this.address={country:null,city:null,line_1:null,line_2:null,postal_code:null,state:null},this.names={name:"shipping_name",country:"shipping_country",city:"shipping_city",line_1:"shipping_line_1",line_2:"shipping_line_2",postal_code:"shipping_postal_code",state:"shipping_state"},this.loading=!1,this.disabled=void 0,this.label=void 0,this.showName=void 0,this.showLine2=void 0,this.required=!1,this.requireName=!1,this.showCity=!0,this.showPostal=!0,this.countryDetails=null,this.countryChoices=void 0}async handleAddressChange(){var e,t;(null===(e=this.address)||void 0===e?void 0:e.country)&&(this.countryDetails&&(null===(t=this.countryDetails)||void 0===t?void 0:t.code)===this.address.country||(this.countryDetails=await(0,s.g)(this.address.country)),this.scChangeAddress.emit(this.address),this.scInputAddress.emit(this.address))}handleNameChange(){this.requireName&&(this.showName=!0)}decodeHtmlEntities(e){var t;return(null===(t=(new DOMParser).parseFromString(e,"text/html"))||void 0===t?void 0:t.body.textContent)||e}updateAddress(e){this.address={...this.address,...e}}handleAddressInput(e){this.scInputAddress.emit({...this.address,...e})}clearAddress(){var e;this.address={name:null===(e=this.address)||void 0===e?void 0:e.name,country:null,city:null,line_1:null,line_2:null,postal_code:null,state:null}}componentWillLoad(){this.initCountryChoices(),this.handleAddressChange(),this.handleNameChange()}async initCountryChoices(){var e,t;this.countryChoices=await(0,s.c)();const n=(null===(t=null===(e=this.countryChoices)||void 0===e?void 0:e.find((e=>{var t;return e.value===(null===(t=this.address)||void 0===t?void 0:t.country)})))||void 0===t?void 0:t.value)||null;this.updateAddress({country:n})}async reportValidity(){return(0,o.r)(this.el)}sortedFields(){var e,t,n,i;return this.countryDetails&&(null===(e=null==this?void 0:this.address)||void 0===e?void 0:e.country)?(null===(i=null===(n=null===(t=null==this?void 0:this.countryDetails)||void 0===t?void 0:t.address_formats)||void 0===n?void 0:n.edit)||void 0===i?void 0:i.match(/{{([^}]+)}}/g).map((e=>e.slice(2,-2))).map((e=>{var t,n,i;return{name:e,label:(null===(n=null===(t=null==this?void 0:this.countryDetails)||void 0===t?void 0:t.address_labels)||void 0===n?void 0:n[e])||(null===(i=null==d?void 0:d.find((t=>(null==t?void 0:t.name)===e)))||void 0===i?void 0:i.label)}})))||[]:d}regions(){var e,t,n,i,r;let s=(null===(t=null===(e=null==this?void 0:this.countryDetails)||void 0===e?void 0:e.states)||void 0===t?void 0:t.map((e=>({value:null==e?void 0:e.code,label:null==e?void 0:e.name}))))||[];return(null===(i=null===(n=null===window||void 0===window?void 0:window.wp)||void 0===n?void 0:n.hooks)||void 0===i?void 0:i.applyFilters)&&(s=window.wp.hooks.applyFilters("surecart_address_regions",s,null===(r=null==this?void 0:this.address)||void 0===r?void 0:r.country)),s}getRoundedProps(e,t){const n=0===e,i=e===t-1;return{squaredTop:i,squaredBottom:n,squared:!i&&!n}}render(){var e,t;const n=null===(t=null!==(e=this.sortedFields())&&void 0!==e?e:[])||void 0===t?void 0:t.filter((e=>{var t,n,i,r;switch(e.name){case"name":return this.showName;case"line_2":return this.showLine2||!!(null===(n=null===(t=null==this?void 0:this.address)||void 0===t?void 0:t.line_2)||void 0===n?void 0:n.length);case"city":return this.showCity;case"state":return!!(null===(i=null==this?void 0:this.regions())||void 0===i?void 0:i.length)&&!!(null===(r=null==this?void 0:this.address)||void 0===r?void 0:r.country);case"postal_code":return this.showPostal;default:return!0}}));return(0,i.h)("div",{class:"sc-address",part:"base"},(0,i.h)("sc-form-control",{label:this.label,exportparts:"label, help-text, form-control",class:"sc-address__control",required:this.required},n.map(((e,t)=>{var r,s,o,a,l,c,d,u,h,p,b,m,v,f,_;const g=this.getRoundedProps(t,n.length);switch(e.name){case"country":return(0,i.h)("sc-select",{exportparts:"base:select__base, input, form-control, label, help-text, trigger, panel, caret, search__base, search__input, search__form-control, menu__base, spinner__base, empty",part:"name__input",value:null===(r=this.address)||void 0===r?void 0:r.country,onScChange:e=>{var t;e.target.value!==(null===(t=this.address)||void 0===t?void 0:t.country)&&(this.clearAddress(),this.updateAddress({country:e.target.value}))},choices:this.countryChoices,autocomplete:"country-name",placeholder:e.label,name:null===(s=this.names)||void 0===s?void 0:s.country,search:!0,unselect:!1,disabled:this.disabled,required:this.required,"aria-label":e.label,...g});case"name":return(0,i.h)("sc-input",{exportparts:"base:input__base, input, form-control, label, help-text",value:null===(o=null==this?void 0:this.address)||void 0===o?void 0:o.name,onScChange:e=>this.updateAddress({name:e.target.value||null}),onScInput:e=>this.handleAddressInput({name:e.target.value||null}),autocomplete:"street-address",placeholder:e.label,name:null===(a=this.names)||void 0===a?void 0:a.name,disabled:this.disabled,required:this.requireName,"aria-label":e.label,...g});case"line_1":return(0,i.h)("sc-input",{exportparts:"base:input__base, input, form-control, label, help-text",value:null===(l=null==this?void 0:this.address)||void 0===l?void 0:l.line_1,onScChange:e=>this.updateAddress({line_1:e.target.value||null}),onScInput:e=>this.handleAddressInput({line_1:e.target.value||null}),autocomplete:"street-address",placeholder:e.label,name:null===(c=this.names)||void 0===c?void 0:c.line_1,disabled:this.disabled,required:this.required,"aria-label":e.label,...g});case"line_2":return(0,i.h)("sc-input",{exportparts:"base:input__base, input, form-control, label, help-text",value:null===(d=null==this?void 0:this.address)||void 0===d?void 0:d.line_2,onScChange:e=>this.updateAddress({line_2:e.target.value||null}),onScInput:e=>this.handleAddressInput({line_2:e.target.value||null}),autocomplete:"street-address",placeholder:e.label,name:null===(u=this.names)||void 0===u?void 0:u.line_2,disabled:this.disabled,"aria-label":e.label,...g});case"city":return(0,i.h)("sc-input",{exportparts:"base:input__base, input, form-control, label, help-text",placeholder:e.label,name:null===(h=this.names)||void 0===h?void 0:h.city,value:null===(p=null==this?void 0:this.address)||void 0===p?void 0:p.city,onScChange:e=>this.updateAddress({city:e.target.value||null}),onScInput:e=>this.handleAddressInput({city:e.target.value||null}),required:this.required,disabled:this.disabled,"aria-label":e.label,...g});case"state":return(0,i.h)("sc-select",{exportparts:"base:select__base, input, form-control, label, help-text, trigger, panel, caret, search__base, search__input, search__form-control, menu__base, spinner__base, empty",placeholder:e.label,name:null===(b=this.names)||void 0===b?void 0:b.state,autocomplete:"address-level1",value:null===(m=null==this?void 0:this.address)||void 0===m?void 0:m.state,onScChange:e=>{var t;return this.updateAddress({state:e.target.value||(null===(t=e.detail)||void 0===t?void 0:t.value)||null})},choices:this.regions(),required:this.required,disabled:this.disabled,search:!0,"aria-label":e.label,...g});case"postal_code":return(0,i.h)("sc-input",{exportparts:"base:input__base, input, form-control, label, help-text",placeholder:e.label,name:null===(v=this.names)||void 0===v?void 0:v.postal_code,onScChange:e=>this.updateAddress({postal_code:e.target.value||null}),onScInput:e=>this.handleAddressInput({postal_code:e.target.value||null}),autocomplete:"postal-code",required:this.required,value:null===(f=null==this?void 0:this.address)||void 0===f?void 0:f.postal_code,disabled:this.disabled,maxlength:"US"===(null===(_=this.address)||void 0===_?void 0:_.country)?5:null,"aria-label":e.label,...g});default:return null}}))),this.loading&&(0,i.h)("sc-block-ui",{exportparts:"base:block-ui, content:block-ui__content"}))}get el(){return(0,i.a)(this)}static get watchers(){return{address:["handleAddressChange"],requireName:["handleNameChange"]}}};u.style=":host{display:block}.sc-address{display:block;position:relative}.sc-address [hidden]{display:none}.sc-address--loading{min-height:230px}.sc-address sc-skeleton{display:block;margin-bottom:1em}.sc-address__control{display:block}.sc-address__control>*{margin-bottom:var(--sc-address-column-spacing, -1px)}.sc-address__columns{display:flex;flex-direction:row;align-items:center;flex-wrap:wrap;justify-content:space-between}.sc-address__columns>*{flex:1;width:50%;margin-right:var(--sc-address-column-spacing, -1px)}.sc-address__columns>*:last-child{margin-right:0}";let h=0;const p=class{constructor(e){(0,i.r)(this,e),this.scBlur=(0,i.c)(this,"scBlur",7),this.scChange=(0,i.c)(this,"scChange",7),this.scFocus=(0,i.c)(this,"scFocus",7),this.inputId="checkbox-"+ ++h,this.labelId=`checkbox-label-${h}`,this.hasFocus=!1,this.name=void 0,this.value=void 0,this.disabled=!1,this.edit=!1,this.required=!1,this.checked=!1,this.indeterminate=!1,this.invalid=!1}firstUpdated(){this.input.indeterminate=this.indeterminate}async triggerClick(){return this.input.click()}async triggerFocus(e){return this.input.focus(e)}async triggerBlur(){return this.input.blur()}async reportValidity(){return this.invalid=!this.input.checkValidity(),this.input.reportValidity()}setCustomValidity(e){this.input.setCustomValidity(e),this.invalid=!this.input.checkValidity()}handleClick(){this.checked=!this.checked,this.indeterminate=!1}handleBlur(){this.hasFocus=!1,this.scBlur.emit()}handleFocus(){this.hasFocus=!0,this.scFocus.emit()}handleLabelMouseDown(){this.input.focus()}handleStateChange(){this.input.checked=this.checked,this.input.indeterminate=this.indeterminate,this.scChange.emit()}componentDidLoad(){this.formController=new o.F(this.el,{value:e=>e.checked?e.value:void 0}).addFormData()}disconnectedCallback(){var e;null===(e=this.formController)||void 0===e||e.removeFormData()}render(){const e=this.edit?"div":"label";return(0,i.h)(e,{key:"3ac07eb97439442d837d0a8cda4136edc3616f2a",part:"base",class:{checkbox:!0,"checkbox--is-required":this.required,"checkbox--checked":this.checked,"checkbox--disabled":this.disabled,"checkbox--focused":this.hasFocus,"checkbox--indeterminate":this.indeterminate,"checkbox--is-rtl":(0,a.i)()},htmlFor:this.inputId,onMouseDown:()=>this.handleLabelMouseDown()},(0,i.h)("span",{key:"ecd9c8541f7ee252d1a2e3224b109632680d3a15",part:"control",class:"checkbox__control"},this.checked?(0,i.h)("span",{part:"checked-icon",class:"checkbox__icon"},(0,i.h)("svg",{viewBox:"0 0 16 16"},(0,i.h)("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd","stroke-linecap":"round"},(0,i.h)("g",{stroke:"currentColor","stroke-width":"2"},(0,i.h)("g",{transform:"translate(3.428571, 3.428571)"},(0,i.h)("path",{d:"M0,5.71428571 L3.42857143,9.14285714"}),(0,i.h)("path",{d:"M9.14285714,0 L3.42857143,9.14285714"})))))):"",!this.checked&&this.indeterminate?(0,i.h)("span",{part:"indeterminate-icon",class:"checkbox__icon"},(0,i.h)("svg",{viewBox:"0 0 16 16"},(0,i.h)("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd","stroke-linecap":"round"},(0,i.h)("g",{stroke:"currentColor","stroke-width":"2"},(0,i.h)("g",{transform:"translate(2.285714, 6.857143)"},(0,i.h)("path",{d:"M10.2857143,1.14285714 L1.14285714,1.14285714"})))))):"",(0,i.h)("input",{key:"8bf943beb6241b829eea924acb3d9e6edef0f7c4",id:this.inputId,ref:e=>this.input=e,type:"checkbox",name:this.name,value:this.value,checked:this.checked,disabled:this.disabled,required:this.required,role:"checkbox","aria-checked":this.checked?"true":"false","aria-labelledby":this.labelId,onClick:()=>this.handleClick(),onBlur:()=>this.handleBlur(),onFocus:()=>this.handleFocus()})),(0,i.h)("span",{key:"c6dc0936a6c90ca0d416cf701ee8277a3045a1a2",part:"label",id:this.labelId,class:"checkbox__label"},(0,i.h)("slot",{key:"78426ec19722b27768b493aba35ec99a82679d27"})))}get el(){return(0,i.a)(this)}static get watchers(){return{checked:["handleStateChange"],indeterminate:["handleStateChange"]}}};p.style=':host{display:block}.checkbox{display:flex;font-family:var(--sc-input-font-family);font-size:var(--sc-input-font-size-medium);font-weight:var(--sc-input-font-weight);color:var(--sc-input-color);vertical-align:middle;cursor:pointer}.checkbox__control{flex:0 0 auto;position:relative;display:inline-flex;align-items:center;justify-content:center;width:var(--sc-checkbox-size);height:var(--sc-checkbox-size);border:solid var(--sc-input-border-width) var(--sc-input-border-color);border-radius:2px;background-color:var(--sc-input-background-color);color:var(--sc-color-white);transition:var(--sc-input-transition, var(--sc-transition-medium)) border-color, var(--sc-input-transition, var(--sc-transition-medium)) opacity, var(--sc-input-transition, var(--sc-transition-medium)) background-color, var(--sc-input-transition, var(--sc-transition-medium)) color, var(--sc-input-transition, var(--sc-transition-medium)) box-shadow}.checkbox__control input[type=checkbox]{position:absolute;opacity:0;padding:0;margin:0;pointer-events:none}.checkbox__control .checkbox__icon{display:inline-flex;width:var(--sc-checkbox-size);height:var(--sc-checkbox-size)}.checkbox__control .checkbox__icon svg{width:100%;height:100%}.checkbox:not(.checkbox--checked):not(.checkbox--disabled) .checkbox__control:hover{border-color:var(--sc-input-border-color-hover);background-color:var(--sc-input-background-color-hover)}.checkbox.checkbox--focused:not(.checkbox--checked):not(.checkbox--disabled) .checkbox__control{border-color:var(--sc-input-border-color-focus);background-color:var(--sc-input-background-color-focus);box-shadow:0 0 0 var(--sc-focus-ring-width) var(--sc-focus-ring-color-primary)}.checkbox--checked .checkbox__control,.checkbox--indeterminate .checkbox__control{border-color:var(--sc-color-primary-500);background-color:var(--sc-color-primary-500)}.checkbox.checkbox--checked:not(.checkbox--disabled) .checkbox__control:hover,.checkbox.checkbox--indeterminate:not(.checkbox--disabled) .checkbox__control:hover{opacity:0.8}.checkbox.checkbox--checked:not(.checkbox--disabled).checkbox--focused .checkbox__control,.checkbox.checkbox--indeterminate:not(.checkbox--disabled).checkbox--focused .checkbox__control{border-color:var(--sc-color-white);background-color:var(--sc-color-primary-500);box-shadow:0 0 0 var(--sc-focus-ring-width) var(--sc-focus-ring-color-primary)}.checkbox--disabled{opacity:0.5;cursor:not-allowed}.checkbox__label{line-height:var(--sc-checkbox-size);margin-top:var(--sc-input-border-width);margin-left:0.5em;flex:1}.checkbox--is-required .checkbox__label:after{content:" *";color:var(--sc-color-danger-500)}::slotted(*){display:inline-block}.checkbox--is-rtl .checkbox__label{margin-left:0;margin-right:0.5em}';const b=class{constructor(e){(0,i.r)(this,e),this.scChange=(0,i.c)(this,"scChange",7),this.scInput=(0,i.c)(this,"scInput",7),this.scInputType=(0,i.c)(this,"scInputType",7),this.scSetState=(0,i.c)(this,"scSetState",7),this.country=void 0,this.show=!1,this.type="other",this.number=null,this.status="unknown",this.loading=void 0,this.help=void 0,this.otherLabel=(0,r._)("Tax ID","surecart"),this.caGstLabel=(0,r._)("GST Number","surecart"),this.auAbnLabel=(0,r._)("ABN Number","surecart"),this.gbVatLabel=(0,r._)("UK VAT","surecart"),this.euVatLabel=(0,r._)("EU VAT","surecart"),this.taxIdTypes=[],this.required=!1}async reportValidity(){return this.input.reportValidity()}onLabelChange(){c.z.ca_gst.label=this.caGstLabel||c.z.ca_gst.label,c.z.au_abn.label=this.auAbnLabel||c.z.au_abn.label,c.z.gb_vat.label=this.gbVatLabel||c.z.gb_vat.label,c.z.eu_vat.label=this.euVatLabel||c.z.eu_vat.label,c.z.other.label=this.otherLabel||c.z.other.label}componentWillLoad(){this.onLabelChange()}renderStatus(){return"valid"===this.status?(0,i.h)("sc-icon",{name:"check",slot:"prefix",style:{color:"var(--sc-color-success-500)"}}):"invalid"===this.status?(0,i.h)("sc-icon",{name:"x",slot:"prefix",style:{color:"var(--sc-color-danger-500)"}}):void 0}filteredZones(){return this.taxIdTypes.length?Object.keys(c.z).filter((e=>this.taxIdTypes.includes(e))).reduce(((e,t)=>(e[t]=c.z[t],e)),{}):c.z}onTaxIdTypesChange(){this.taxIdTypes.length&&(this.type=this.taxIdTypes.includes("other")?"other":this.taxIdTypes[0])}getZoneLabel(){var e,t;const n=this.filteredZones()||{};return(null===(e=null==n?void 0:n[(null==this?void 0:this.type)||"other"])||void 0===e?void 0:e.label)||(null===(t=null==n?void 0:n[Object.keys(n)[0]])||void 0===t?void 0:t.label)}render(){var e,t,n,s,o;return(0,i.h)(i.F,{key:"43a7cad8450579f6d5060c612c82f4c72893cbbf"},(0,i.h)("sc-input",{key:"00ad99ba8390326c977bd3ea55c8cd0c396d827f",name:"tax_identifier.number_type",required:this.required,value:this.type,style:{display:"none"}}),(0,i.h)("sc-input",{key:"cc9bb4148eae72267fc0f649980ddbef95f43a98",ref:e=>this.input=e,label:this.getZoneLabel(),"aria-label":(0,r._)("Tax ID","surecart"),placeholder:(0,r._)("Enter Tax ID","surecart"),name:"tax_identifier.number",value:this.number,onScInput:e=>{e.stopImmediatePropagation(),this.scInput.emit({number:e.target.value,number_type:this.type||"other"})},onScChange:e=>{e.stopImmediatePropagation(),this.scChange.emit({number:e.target.value,number_type:this.type||"other"})},help:this.help,required:this.required},this.loading&&"eu_vat"===this.type?(0,i.h)("sc-spinner",{slot:"prefix",style:{"--spinner-size":"10px"}}):this.renderStatus(),1===(null===(e=Object.keys(this.filteredZones()||{}))||void 0===e?void 0:e.length)?(0,i.h)("span",{slot:"suffix"},null===(n=null===(t=Object.values(this.filteredZones()||{}))||void 0===t?void 0:t[0])||void 0===n?void 0:n.label_small):(0,i.h)("sc-dropdown",{slot:"suffix",position:"bottom-right",role:"select","aria-multiselectable":"false","aria-label":(0,r._)("Select number type","surecart")},(0,i.h)("sc-button",{type:"text",slot:"trigger",caret:!0,loading:!1,style:{color:"var(--sc-input-label-color)"},tabindex:"0"},null===(o=null===(s=this.filteredZones())||void 0===s?void 0:s[(null==this?void 0:this.type)||"other"])||void 0===o?void 0:o.label_small),(0,i.h)("sc-menu",null,Object.keys(this.filteredZones()||{}).map((e=>(0,i.h)("sc-menu-item",{role:"option",onClick:()=>{this.scInput.emit({number:this.number,number_type:e}),this.scChange.emit({number:this.number,number_type:e}),this.type=e},onKeyDown:t=>{var n;"Enter"===t.key&&(this.scInput.emit({number:this.number,number_type:e}),this.scChange.emit({number:this.number,number_type:e}),this.type=e,null===(n=this.input)||void 0===n||n.triggerFocus(),(0,l.s)((0,r.s)((0,r._)("%s selected","surecart"),c.z[e].label_small,"assertive")))},checked:this.type===e,"aria-selected":this.type===e?"true":"false","aria-label":c.z[e].label_small},c.z[e].label_small)))))))}static get watchers(){return{otherLabel:["onLabelChange"],caGstLabel:["onLabelChange"],auAbnLabel:["onLabelChange"],gbVatLabel:["onLabelChange"],euVatLabel:["onLabelChange"],taxIdTypes:["onTaxIdTypesChange"]}}};b.style=":host{display:block;z-index:3;position:relative}"},8290:function(e,t,n){n.d(t,{f:function(){return s},z:function(){return r}});var i=n(9955);const r={ca_gst:{label:(0,i._)("GST Number","surecart"),label_small:(0,i._)("CA GST","surecart")},au_abn:{label:(0,i._)("ABN Number","surecart"),label_small:(0,i._)("AU ABN","surecart")},gb_vat:{label:(0,i._)("VAT Number","surecart"),label_small:(0,i._)("UK VAT","surecart")},eu_vat:{label:(0,i._)("VAT Number","surecart"),label_small:(0,i._)("EU VAT","surecart")},other:{label:(0,i._)("Tax ID","surecart"),label_small:(0,i._)("Other","surecart")}},s=(e,t=!1)=>{const n=t?(0,i._)("Estimated Tax","surecart"):(0,i._)("Tax","surecart");return e?`${n}: ${e}`:n}}}]);