import{Fragment,h}from"@stencil/core";import{__,_n,sprintf}from"@wordpress/i18n";import{addQueryArgs}from"@wordpress/url";export class ScPurchaseDownloadsList{constructor(){this.allLink=void 0,this.heading=void 0,this.busy=void 0,this.loading=void 0,this.requestNonce=void 0,this.error=void 0,this.purchases=[]}renderEmpty(){return h("div",null,h("sc-divider",{style:{"--spacing":"0"}}),h("slot",{name:"empty"},h("sc-empty",{icon:"download"},__("You don't have any downloads.","surecart"))))}renderLoading(){return h("sc-card",{"no-padding":!0,style:{"--overflow":"hidden"}},h("sc-stacked-list",null,h("sc-stacked-list-row",{style:{"--columns":"2"},"mobile-size":0},h("div",{style:{padding:"0.5em"}},h("sc-skeleton",{style:{width:"30%",marginBottom:"0.75em"}}),h("sc-skeleton",{style:{width:"20%"}})))))}renderList(){return this.purchases.map((e=>{var t,r,s,o,i,a;const l=null===(r=null===(t=null==e?void 0:e.product)||void 0===t?void 0:t.downloads)||void 0===r?void 0:r.data.filter((e=>!e.archived)),n=null===(i=null===(o=null===(s=null==e?void 0:e.product)||void 0===s?void 0:s.downloads)||void 0===o?void 0:o.pagination)||void 0===i?void 0:i.count,d=(l||[]).map((e=>{var t;return(null==e?void 0:e.media)?null===(t=null==e?void 0:e.media)||void 0===t?void 0:t.byte_size:0})),c=d.reduce(((e,t)=>e+t),0);return h("sc-stacked-list-row",{href:(null==e?void 0:e.revoked)?null:addQueryArgs(window.location.href,{action:"show",model:"download",id:e.id,nonce:this.requestNonce}),key:e.id,"mobile-size":0},h("sc-spacing",{style:{"--spacing":"var(--sc-spacing-xx--small)"}},h("div",null,h("strong",null,null===(a=null==e?void 0:e.product)||void 0===a?void 0:a.name)),h("div",{class:"download__details"},sprintf(_n("%s file","%s files",n,"surecart"),n),!!c&&h(Fragment,null," ","â€¢ ",h("sc-format-bytes",{value:c})))),h("sc-icon",{name:"chevron-right",slot:"suffix"}))}))}renderContent(){var e;return this.loading?this.renderLoading():0===(null===(e=this.purchases)||void 0===e?void 0:e.length)?this.renderEmpty():h("sc-card",{"no-padding":!0,style:{"--overflow":"hidden"}},h("sc-stacked-list",null,this.renderList()))}render(){return h("sc-dashboard-module",{key:"ee8392245f6a45bfd93f30318f5784afed1f26a5",class:"downloads-list",error:this.error},h("span",{key:"5b4404db99610a80fdfea36e855e6c7f6964b500",slot:"heading"},h("slot",{key:"4a2d16a0bea06d1585bf4007efa88f2fae06082e",name:"heading"},this.heading||__("Items","surecart"))),h("slot",{key:"228e65821bf75d7b7e7c2ffc3de7530c2be55554",name:"before"}),!!this.allLink&&h("sc-button",{key:"75598c02ef6bd92263aeaa34873abcfc7f99876b",type:"link",href:this.allLink,slot:"end"},__("View all","surecart"),h("sc-icon",{key:"af2ec3a2fa00b3d7dc3eac3932ead08aba7c7aca",name:"chevron-right",slot:"suffix"})),this.renderContent(),h("slot",{key:"3128870af4cd81f28e25dd0a3f3220fa03859cba",name:"after"}),this.busy&&h("sc-block-ui",{key:"5dc26eaeb5c4389faf05247419b67041d5b41896"}))}static get is(){return"sc-purchase-downloads-list"}static get encapsulation(){return"shadow"}static get originalStyleUrls(){return{$:["sc-purchase-downloads-list.scss"]}}static get styleUrls(){return{$:["sc-purchase-downloads-list.css"]}}static get properties(){return{allLink:{type:"string",mutable:!1,complexType:{original:"string",resolved:"string",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"all-link",reflect:!1},heading:{type:"string",mutable:!1,complexType:{original:"string",resolved:"string",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"heading",reflect:!1},busy:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"busy",reflect:!1},loading:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"loading",reflect:!1},requestNonce:{type:"string",mutable:!1,complexType:{original:"string",resolved:"string",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"request-nonce",reflect:!1},error:{type:"string",mutable:!1,complexType:{original:"string",resolved:"string",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"error",reflect:!1},purchases:{type:"unknown",mutable:!1,complexType:{original:"Array<Purchase>",resolved:"Purchase[]",references:{Array:{location:"global",id:"global::Array"},Purchase:{location:"import",path:"../../../types",id:"src/types.ts::Purchase"}}},required:!1,optional:!1,docs:{tags:[],text:""},defaultValue:"[]"}}}static get elementRef(){return"el"}}