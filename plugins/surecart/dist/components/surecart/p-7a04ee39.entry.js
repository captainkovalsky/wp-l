import{r as e,h as s,F as d,a as i}from"./p-e97fde0a.js";import{a as n}from"./p-401e165e.js";const t=":host{display:block}.download__details{opacity:0.75}";const o=t;const l=class{constructor(s){e(this,s);this.allLink=undefined;this.heading=undefined;this.busy=undefined;this.loading=undefined;this.requestNonce=undefined;this.error=undefined;this.purchases=[]}renderEmpty(){return s("div",null,s("sc-divider",{style:{"--spacing":"0"}}),s("slot",{name:"empty"},s("sc-empty",{icon:"download"},wp.i18n.__("You don't have any downloads.","surecart"))))}renderLoading(){return s("sc-card",{"no-padding":true,style:{"--overflow":"hidden"}},s("sc-stacked-list",null,s("sc-stacked-list-row",{style:{"--columns":"2"},"mobile-size":0},s("div",{style:{padding:"0.5em"}},s("sc-skeleton",{style:{width:"30%",marginBottom:"0.75em"}}),s("sc-skeleton",{style:{width:"20%"}})))))}renderList(){return this.purchases.map((e=>{var i,t,o,l,a,r;const c=(t=(i=e===null||e===void 0?void 0:e.product)===null||i===void 0?void 0:i.downloads)===null||t===void 0?void 0:t.data.filter((e=>!e.archived));const u=(a=(l=(o=e===null||e===void 0?void 0:e.product)===null||o===void 0?void 0:o.downloads)===null||l===void 0?void 0:l.pagination)===null||a===void 0?void 0:a.count;const f=(c||[]).map((e=>{var s;return(e===null||e===void 0?void 0:e.media)?(s=e===null||e===void 0?void 0:e.media)===null||s===void 0?void 0:s.byte_size:0}));const v=f.reduce(((e,s)=>e+s),0);return s("sc-stacked-list-row",{href:!(e===null||e===void 0?void 0:e.revoked)?n(window.location.href,{action:"show",model:"download",id:e.id,nonce:this.requestNonce}):null,key:e.id,"mobile-size":0},s("sc-spacing",{style:{"--spacing":"var(--sc-spacing-xx--small)"}},s("div",null,s("strong",null,(r=e===null||e===void 0?void 0:e.product)===null||r===void 0?void 0:r.name)),s("div",{class:"download__details"},wp.i18n.sprintf(wp.i18n._n("%s file","%s files",u,"surecart"),u),!!v&&s(d,null," ","â€¢ ",s("sc-format-bytes",{value:v})))),s("sc-icon",{name:"chevron-right",slot:"suffix"}))}))}renderContent(){var e;if(this.loading){return this.renderLoading()}if(((e=this.purchases)===null||e===void 0?void 0:e.length)===0){return this.renderEmpty()}return s("sc-card",{"no-padding":true,style:{"--overflow":"hidden"}},s("sc-stacked-list",null,this.renderList()))}render(){return s("sc-dashboard-module",{key:"ee8392245f6a45bfd93f30318f5784afed1f26a5",class:"downloads-list",error:this.error},s("span",{key:"5b4404db99610a80fdfea36e855e6c7f6964b500",slot:"heading"},s("slot",{key:"4a2d16a0bea06d1585bf4007efa88f2fae06082e",name:"heading"},this.heading||wp.i18n.__("Items","surecart"))),s("slot",{key:"228e65821bf75d7b7e7c2ffc3de7530c2be55554",name:"before"}),!!this.allLink&&s("sc-button",{key:"75598c02ef6bd92263aeaa34873abcfc7f99876b",type:"link",href:this.allLink,slot:"end"},wp.i18n.__("View all","surecart"),s("sc-icon",{key:"af2ec3a2fa00b3d7dc3eac3932ead08aba7c7aca",name:"chevron-right",slot:"suffix"})),this.renderContent(),s("slot",{key:"3128870af4cd81f28e25dd0a3f3220fa03859cba",name:"after"}),this.busy&&s("sc-block-ui",{key:"5dc26eaeb5c4389faf05247419b67041d5b41896"}))}get el(){return i(this)}};l.style=o;export{l as sc_purchase_downloads_list};
//# sourceMappingURL=p-7a04ee39.entry.js.map