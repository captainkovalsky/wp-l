{"file":"address-e0c9b577.js","mappings":";;;;;AAGO,MAAM,wBAAwB,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;AAChH,MAAM,8BAA8B,GAAG,CAAC,IAAI,CAAC,CAAC;AAC9C,MAAM,uBAAuB,GAAG,CAAC,IAAI,CAAC,CAAC;AAGvC,MAAM,SAAS,GAAG,CAAC,WAAmB;IAC3C,OAAO,CAAC,8BAA8B,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;AAC/D,CAAC,CAAC;AAEK,MAAM,OAAO,GAAG,CAAC,WAAmB;IACzC,OAAO,CAAC,uBAAuB,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;AACxD,CAAC,CAAC;AAEK,MAAM,QAAQ,GAAG,CAAC,WAAmB;IAC1C,OAAO,wBAAwB,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;AACxD,CAAC,CAAC;AA+BF,MAAM,IAAI,GAAG,CAAA,MAAA,MAAM,CAAC,MAAM,0CAAE,MAAM,KAAI,SAAS,CAAC,QAAQ,KAAK,SAAiB,aAAjB,SAAS,uBAAT,SAAS,CAAU,eAAe,CAAA,IAAI,CAAC,SAAS,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;MAEzH,cAAc,GAAG;IAC5B,MAAM,GAAG,GAAGA,yBAAY,CAAC,0CAA0C,EAAE;QACnE,MAAM,EAAE,IAAI;KACb,CAAC,CAAC;IACH,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC;IAClC,MAAM,IAAI,GAAQ,MAAM,QAAQ,CAAC,IAAI,EAAE,CAAC;IACxC,OAAO,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAA4C,CAAC;AACvH,EAAE;MAEW,iBAAiB,GAAG,OAAO,WAAmB;IACzD,MAAM,GAAG,GAAGA,yBAAY,CAAC,4CAA4C,WAAW,EAAE,EAAE;QAClF,MAAM,EAAE,IAAI;KACb,CAAC,CAAC;IACH,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC;IAClC,OAAO,MAAM,QAAQ,CAAC,IAAI,EAAE,CAAC;AAC/B,EAAE;MAEW,iBAAiB,GAAG,CAAC,OAAyB;IACzD,QACE,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,OAAO;SAChB,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,MAAM,CAAA;SACd,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,WAAW,GAAG,IAAI,CAAC;SACzD,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,IAAI,GAAG,IAAI,CAAC;SAChD,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,KAAK,GAAG,IAAI,CAAC;MACnD;AACJ;;;;;;","names":["addQueryArgs"],"sources":["src/functions/address.ts"],"sourcesContent":["import { __ } from '@wordpress/i18n';\nimport { addQueryArgs } from '@wordpress/url';\nimport { Address } from '../types';\nexport const STATE_INCLUDED_COUNTRIES = ['AU', 'BR', 'CA', 'CH', 'ES', 'HK', 'IE', 'IN', 'IT', 'JP', 'MY', 'MX', 'US'];\nexport const POSTAL_CODE_EXCLUDED_COUNTRIES = ['HK'];\nexport const CITY_EXCLUDED_COUNTRIES = ['SG'];\nimport countries from './countries.json';\n\nexport const hasPostal = (countryCode: string) => {\n  return !POSTAL_CODE_EXCLUDED_COUNTRIES.includes(countryCode);\n};\n\nexport const hasCity = (countryCode: string) => {\n  return !CITY_EXCLUDED_COUNTRIES.includes(countryCode);\n};\n\nexport const hasState = (countryCode: string) => {\n  return STATE_INCLUDED_COUNTRIES.includes(countryCode);\n};\n\nexport const hasCompleteAddress = args => {\n  const { country, state } = args;\n  // does it have the fields filled out?\n  if (!hasRequiredFields(args)) {\n    return false;\n  }\n  return hasState(country) ? hasCorrectState(country, state) : true;\n};\n\nexport const hasCorrectState = (country, state) => {\n  return (countries?.[country] || ([] as Array<{ value: string; label: string }>)).some(({ value }) => value === state);\n};\n\nexport const hasRequiredFields = ({ city, country, line_1, postal_code, state }) => {\n  if (!country) {\n    return false;\n  }\n  if (hasPostal(country) && !postal_code) {\n    return false;\n  }\n  if (hasCity(country) && !city) {\n    return false;\n  }\n  if (hasState(country) && !state) {\n    return false;\n  }\n  return !!line_1;\n};\n\nconst lang = window.scData?.locale || navigator.language || (navigator as any)?.browserLanguage || (navigator.languages || ['en'])[0];\n\nexport const countryChoices = async () => {\n  const url = addQueryArgs(`https://api.surecart.com/v1/public/atlas`, {\n    locale: lang,\n  });\n  const response = await fetch(url);\n  const data: any = await response.json();\n  return data?.data.map(({ code, name }) => ({ value: code, label: name })) as Array<{ value: string; label: string }>;\n};\n\nexport const getCountryDetails = async (countryCode: string) => {\n  const url = addQueryArgs(`https://api.surecart.com/v1/public/atlas/${countryCode}`, {\n    locale: lang,\n  });\n  const response = await fetch(url);\n  return await response.json();\n};\n\nexport const isAddressComplete = (address: Partial<Address>) => {\n  return (\n    address?.country && // must have country\n    address?.line_1 && // must have line 1\n    (hasPostal(address.country) ? address?.postal_code : true) && // should have postal code if applicable\n    (hasCity(address.country) ? address?.city : true) && // should have city if applicable\n    (hasState(address.country) ? address?.state : true) // should have state if applicable\n  );\n};\n\nexport const isAddressCompleteEnough = (address: Partial<Address>) => {\n  return (\n    address?.country && // must have country\n    (hasPostal(address.country) ? address?.postal_code : true) && // should have postal code if applicable\n    (hasCity(address.country) ? address?.city : true) && // should have city if applicable\n    (hasState(address.country) ? address?.state : true) // should have state if applicable\n  );\n};\n"],"version":3}